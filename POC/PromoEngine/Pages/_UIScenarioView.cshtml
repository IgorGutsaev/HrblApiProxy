@model Filuet.Hrbl.Ordering.Abstractions.Models.Promotions

<style>
    .promoFoundPopup {
        border: 1px solid #0094ff;
        background-color: #dbf2ff;
        max-width: 700px;
        text-align: left;
        margin: auto;
        width: 700px;
        padding: 5px;
    }
</style>

<script type="text/javascript">
    function Go(bval) {
        alert(bval);
    }
</script>

@{
    <div class="promoFoundPopup">
        <b>Congratulations!</b><br>
        Gifts for <b>@Model.Promo.Count() promotion@(@Model.Promo.Count() == 1 ? string.Empty : "s")</b> are available to you.<br>
        Select gifts to add to your order.
        <br>
        <br>

        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
            Launch demo modal
        </button>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Manage Vouchers & Promotions</h5>

                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>
                            <h6>Select the discount and/or promotions and add them to you order</h6>
                            <mark style="border: 1px solid #ffd162"><small>Some items are not available for some promotions if previously selected</small></mark>
                        </p>

                        <div id="carouselExampleControls" class="carousel" data-ride="carousel @*add 'slide' for animation*@" style="background-color: darkgray">
                            <ol class="carousel-indicators">
                                @for (int i = 0; i < Model.Promo.Count(); i++)
                                {
                                    <li data-target="#carouselExampleIndicators" data-slide-to="@i" class="@(i == 0 ? "active" : string.Empty)"></li>
                                }
                            </ol>
                            <div class="carousel-inner">
                                @foreach (var x in Model.Promo)
                                {
                                    <div class="carousel-item @(x == Model.Promo.First() ? "active" : string.Empty)" style="padding: 30px 70px 150px 70px; margin: 0 50px 0 50px">
                                        <p class="h6">@x.Notification</p>
                                        @Html.Partial("_ChoiseView", x)

                                        <div class="carousel-caption d-none d-md-block">
                                            <p>@(x.RuleId + ": " + x.RuleName)</p>
                                        </div>
                                    </div>
                                }
                            </div>
                            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="Go('@(Model.Promo[0].RewardGroups[0].Rewards[0].IsSelected)')">Save selection</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}